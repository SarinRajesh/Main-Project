{% load static %}
<!DOCTYPE HTML>
<html lang="en">
    <head>
        <!--=============== basic  ===============-->
        <meta charset="UTF-8">
        <title>ElegantDecor - Creative Responsive Architecture Template</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta name="robots" content="index, follow"/>
        <meta name="keywords" content=""/>
        <meta name="description" content=""/>
        <!--=============== css  ===============-->	
        <link type="text/css" rel="stylesheet" href="{% static 'index/css/reset.css' %}">
        <link type="text/css" rel="stylesheet" href="{% static 'index/css/plugins.css' %}">
        <link type="text/css" rel="stylesheet" href="{% static 'index/css/style.css' %}">
        <link type="text/css" rel="stylesheet" href="{% static 'index/css/dark-style.css' %}">		
        <link type="text/css" rel="stylesheet" href="{% static 'index/css/yourstyle.css' %}">
        <!--=============== favicons ===============-->
        <link rel="shortcut icon" href="{% static 'index/images/favicon.ico' %}">
    </head>

    <body>
        <!-- loader -->
        <div class="loader">
            <div id="movingBallG">
                <div class="movingBallLineG"></div>
                <div id="movingBallG_1" class="movingBallG"></div>
            </div>
        </div>
        <!-- loader end -->
        <!--================= Main   ================-->
        <div id="main">
            <!--================= header ================-->
            <header class="main-header">
                <!-- logo -->
                <a class="logo-holder"href="{% url 'index' %}" ><img src="{% static 'index/images/ElegantDecor.gif' %}" style="margin-left: 39%;" height="43px" alt=""></a>
                <!-- logo end -->  
                {% if user.is_authenticated %}
                            
                <div class="show-share-wrap">
                    <div class="show-share" style="color: #f39c12; font-weight: bold; font-size: 1.2em; position: relative; z-index: 100;">
                        <span style="display: inline-block; padding: 5px;">{{ user.username }}</span>
                    </div>
                </div>
                {% else %}
                {% endif %}
                <!-- share button end-->  		
                <!-- search button--> 
                <!-- search button end --> 
                <!-- mobile nav --> 
                <div class="nav-button-wrap">
                    <div class="nav-button vis-main-menu"><span></span><span></span><span></span></div>
                </div>
                <!-- mobile nav end--> 
                <!--  navigation --> 
                <div class="nav-holder">
                    <nav>
                        <ul>   
                            {% if user_type != 'Designer' and user_type != 'Customer' %}
                                <li>
                                    <a href="{% url 'index' %}" class="act-link">Home</a>
                                </li>
                                <li>
                                    <a href="{% url 'portfolio' %}">Designs</a>
                                </li>
                                        
                            <li>
                                <a href="about.html">About</a>
                                <ul>
                                    <li><a href="about-personal.html">Personal</a></li>
                                    <li><a href="services.html">Services</a></li>
                                </ul>
                            </li>
                                <li>
                                    <a href="contact.html">Contacts</a>
                                </li>
                                <li>
                                    <a href="{% url 'shop' %}">Shop</a>
                                    <!--second level end-->
                                    <ul>
                                        <li><a href="{% url 'cart' %}">Cart</a></li>
                                    </ul>
                                    <!--second level end-->
                                </li>
                                <li>
                                    <a href="blog.html">Journal</a>
                                    <ul>
                                        <li><a href="blog-grid.html">Grid</a></li>
                                        <li><a href="blog-masonry.html">Masonry</a></li>
                                        <li><a href="blog-single.html">Post Single</a></li>
                                        <li><a href="404.html">404</a></li>
                                    </ul>
                                </li>
                             
                                <li>
                                    <a href="{% url 'signin' %}">Signin</a>
                                </li>
                                {% else %}
                                <li>
                                    <a href="{% url 'index' %}" class="act-link">Home</a>
                                </li>
                                <li>
                                    <a href="{% url 'portfolio' %}">Designs</a>
                                </li>
                                {% if user_type == 'Customer' %}
                                <li>
                                    <a href="">Design Tools</a>
                                    <ul>
                                        <li>
                                            <a href="{% url 'virtual_room_designer' %}">3D Room Creation</a>
                                        </li>
                                        <li>
                                            <a href="{% url 'recommend_products_by_color' %}">Color-Based Suggestions</a>
                                        </li>
                                    </ul>
                                </li>
                               
                                {% endif %}
                                
                            <li>
                                <a href="about.html">About</a>
                                <ul>
                                    <li><a href="about-personal.html">Personal</a></li>
                                    <li><a href="services.html">Services</a></li>
                                </ul>
                            </li>
                            <li>
                                <a href="contact.html">Contacts</a>
                            </li>
                            {% if user_type == 'Designer' %}
                            <li>
                                <a href="{% url 'consultations' %}" >Consultations</a>
                            </li>
                            <li>
                                <a href="{% url 'projects_manage' %}" >Projects</a>
                            </li>
                            {% endif %}
                            
                            {% if user_type != 'Designer' %}
                            <li>
                                <a href="{% url 'shop' %}">Shop</a>
                                <!--second level end-->
                                <ul>
                                    <li><a href="{% url 'cart' %}">Cart</a></li>
                                </ul>
                                <!--second level end-->
                            </li>
                            <li><a href="{% url 'mood_board_list' %}">Mood Boards</a>
                                <ul>
                                    <li><a href="{% url 'create_mood_board' %}">Create Mood Boards</a></li>
                                </ul>
                            </li>
                           
                            {% endif %}
                            {% endif %}
                        </ul>
                    </nav>
                    
                </div>
                <!-- navigation  end -->
            </header>
            <!-- header  end -->
            <!--=============== wrapper ===============-->
            <div id="wrapper">
                <!-- content-holder  -->
                <div class="content-holder">
                    <!-- hero content -->
                    <div class="fl-wrap full-height hero-content" data-scrollax-parent="true" >
                        <div class="media-container" data-scrollax="properties: { translateY: '400px' }" >
                            <div class="video-mask"></div>
                            <div class="video-holder">
                                <div class="video-container">
                                    <video autoplay loop muted class="bgvid">
                                        <source src="{% static 'index/video/intro.mp4' %}" type="video/mp4">
                                    </video>
                                    
                                </div>
                                <!--  
                                    Vimeo code
                                    
                                     <div  class="background-vimeo" data-vim="97871257"> </div> --> 
                                <!--  
                                    Youtube code 
                                    
                                     <div  class="background-youtube" data-vid="Hg5iNVSp2z8" data-mv="1"> </div> -->
                                     <div class="mob-bg bg" data-bg="{% static 'index/images/bg/2.jpg' %}"></div>

                            </div>
                        </div>
                        <div class="overlay"></div>
                        <!-- hero-wrap-->           
                        <div class="hero-wrap alt">
                            <div class="container">
                                <div class="hero-item">
                                    <h2>ElegantDecor<br>Creative  Architecture <br> Studio</h2>
                                    <div class="clearfix"></div>
                                    <p>All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary .</p>
                                    <div class="clearfix"></div>
                                    <a href="#sec2" class="btn float-btn flat-btn custom-scroll-link">Let's Start</a>
                                </div>
                            </div>
                        </div>
                        <!-- hero-wrap end-->  
                    </div>
                    <!-- hero content end-->
                    <!--content-->	 
                    <div class="content">
                        <!--section -->	
                        <section id="sec2" data-scrollax-parent="true" >
                            <div class="container">
                                <div class="section-container fl-wrap">
                                    <div class="row">
                                        <div class="col-md-7">
                                            <div class="content-wrap about-wrap">
                                                <h3 class="bold-title">Welcome !  We are ElegantDecor .  <br>   Architecture Studio <br> From NY</h3>
                                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras lacinia magna vel molestie faucibus. Donec auctor et urnaLorem ipsum dolor sit amet, consectetur adipiscing elit. Cras lacinia magna vel molestie faucibus.  
                                                    Cras lacinia magna vel molestie faucibus. Donec auctor et urnaLorem ipsum dolor sit amet, consectetur adipiscing elit. Cras lacinia magna vel molestie faucibus.
                                                </p>
                                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras lacinia magna vel molestie faucibus. Donec auctor et urnaLorem ipsum dolor sit amet, consectetur adipiscing elit.  
                                                </p>
                                                <br><br>
                                                <h3 class="bold-title">What we do</h3>
                                                <div class="pr-tags fl-wrap">
                                                    <span>Services : </span>
                                                    <ul>
                                                        <li><a href="#">Architecture</a></li>
                                                        <li><a href="#">Design</a></li>
                                                        <li><a href="#">Photography</a></li>
                                                    </ul>
                                                </div>
                                                <span class="bold-separator"></span>
                                                <div class="clearfix"></div>
                                                <a href="portfolio.html" class="btn float-btn flat-btn">Our portfolio</a>
                                            </div>
                                        </div>
                                        <div class="col-md-5">
                                            <div class="box-item">
                                                <img src="{% static 'index/images/folio/6.jpg' %}" class="respimg" alt="">
                                                <div class="overlay"></div>
                                                <a href="{% static 'index/images/folio/6.jpg' %}" class="image-popup popup-image"><i class="fa fa-search"></i></a>
                                            </div>
                                            
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="bg dec-bg left-pos-dec"  data-bg="images/bg/14.jpg"></div>
                        </section>
                        <!--section end  -->	
                        <!--section -->	
                        <section  >
                            <div class="bg" data-bg="{% static 'index/images/bg/4.jpg' %}"></div>
                            <div class="overlay"></div>
                            <div class="container">
                                <div class="intro-text fl-wrap">
                                    <h2>Entrust your project <br>to our team of  <br>professionals</h2>
                                    <a href="services.html" class="btn float-btn flat-btn">Our Services</a>
                                    <a href="contact.html" class="btn float-btn flat-btn">Get in Touch</a>
                                </div>
                            </div>
                        </section>
                        <!--section end  -->	
                        <!--section -->	                             	 
                        <section >
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="pr-title">
                                            Our Featured Work
                                            <span>Lorem Ipsum generators on the Internet tend to repeat king this the first true generator . </span>
                                        </div>
                                    </div>
                                </div>
                                <!--parallax-item -->	
                                <div class="row">
                                    <div class="col-md-5"></div>
                                    <div class="col-md-7">
                                        <div class="parallax-item fl-wrap" data-scrollax-parent="true">
                                            <div class="parallax-header fl-wrap">
                                                <span>01.</span>
                                                <ul>
                                                    <li><a href="#">Design</a></li>
                                                    <li><a href="#">Architecture </a></li>
                                                </ul>
                                            </div>
                                            <img src="{% static 'index/images/folio/2.jpg' %}" alt="">

                                            <div class="parallax-text left-pos" data-scrollax="properties: { translateY: '-250px' }">
                                                <h3><a href="portfolio-single.html">Theatre de Stoep</a></h3>
                                                <h4>There are many variations of passages of Lorem Ipsum</h4>
                                                <a href="portfolio-single.html" class="btn float-btn flat-btn">View project</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--parallax-item end-->	
                                <!--parallax-item -->	
                                <div class="row">
                                    <div class="col-md-7">
                                        <div class="parallax-item fl-wrap" data-scrollax-parent="true">
                                            <div class="parallax-header fl-wrap">
                                                <span>02.</span>
                                                <ul>
                                                    <li><a href="#">Design</a></li>
                                                    <li><a href="#">Architecture </a></li>
                                                </ul>
                                            </div>
                                            <img src="{% static 'index/images/folio/11.jpg' %}" alt="">

                                            <div class="parallax-text right-pos" data-scrollax="properties: { translateY: '-250px' }">
                                                <h3><a href="portfolio-single.html">New Acropolis Museum</a></h3>
                                                <h4>There are many variations of passages of Lorem Ipsum</h4>
                                                <a href="portfolio-single.html" class="btn float-btn flat-btn">View project</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--parallax-item end-->	                    
                                <!--parallax-item -->	
                                <div class="row">
                                    <div class="col-md-5"></div>
                                    <div class="col-md-7">
                                        <div class="parallax-item fl-wrap" data-scrollax-parent="true">
                                            <div class="parallax-header fl-wrap">
                                                <span>03.</span>
                                                <ul>
                                                    <li><a href="#">Design</a></li>
                                                    <li><a href="#">Architecture </a></li>
                                                </ul>
                                            </div>
                                            <img src="{% static 'index/images/folio/16.jpg' %}" alt="">
                                            <div class="parallax-text left-pos" data-scrollax="properties: { translateY: '-250px' }">
                                                <h3><a href="portfolio-single.html">Theatre de Stoep</a></h3>
                                                <h4>There are many variations of passages of Lorem Ipsum</h4>
                                                <a href="portfolio-single.html" class="btn float-btn flat-btn">View project</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--parallax-item end-->	
                                <!--parallax-item -->	
                                <div class="row">
                                    <div class="col-md-7">
                                        <div class="parallax-item fl-wrap" data-scrollax-parent="true">
                                            <div class="parallax-header fl-wrap">
                                                <span>04.</span>
                                                <ul>
                                                    <li><a href="#">Design</a></li>
                                                    <li><a href="#">Architecture </a></li>
                                                </ul>
                                            </div>
                                            <img src="{% static 'index/images/folio/19.jpg' %}" alt="">
                                            <div class="parallax-text right-pos" data-scrollax="properties: { translateY: '-250px' }">
                                                <h3><a href="portfolio-single.html">New Acropolis Museum</a></h3>
                                                <h4>There are many variations of passages of Lorem Ipsum</h4>
                                                <a href="portfolio-single.html" class="btn float-btn flat-btn">View project</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--parallax-item end-->	                       
                            </div>
                            <div class="partcile-dec" data-parcount="250"></div>
                        </section>
                        <!--section end  -->	
                        <!--section -->	
                        <section class="parallax-section header-section  " data-scrollax-parent="true" id="sec6">
                            <div class="bg" data-bg="{% static 'index/images/bg/1.jpg' %}" data-scrollax="properties: { translateY: '200px' }"></div>
                        <div class="overlay"></div>
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="pr-title">
                                            Testimonials
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <div class="single-slider testilider fl-wrap" data-effects="slide">
                                            <div class="swiper-container">
                                                <div class="swiper-wrapper">
                                                    <!-- swiper-slide -->
                                                    <div class="swiper-slide">
                                                        <div class="testi-item fl-wrap">
                                                            <h3>Andy Smith</h3>
                                                            <p>"All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words"</p>
                                                            <a href="#" class="btn float-btn flat-btn" target="_blank">Via Twitter</a>
                                                        </div>
                                                    </div>
                                                    <!-- swiper-slide end-->
                                                    <!-- swiper-slide -->
                                                    <div class="swiper-slide">
                                                        <div class="testi-item fl-wrap">
                                                            <h3>Liza Mirovsky</h3>
                                                            <p>"Vestibulum orci felis, ullamcorper non condimentum non, ultrices ac nunc. Mauris non ligula suscipit, vulputate mi accumsan, dapibus felis. Nullam sed sapien dui. Nulla auctor sit amet sem non porta. Integer iaculis tellus nulla, quis imperdiet magna venenatis vitae"</p>
                                                            <a href="#" class="btn float-btn flat-btn" target="_blank">Via Facebook</a>
                                                        </div>
                                                    </div>
                                                    <!-- swiper-slide end-->
                                                    <!-- swiper-slide -->
                                                    <div class="swiper-slide">
                                                        <div class="testi-item fl-wrap">
                                                            <h3>Gary Trust</h3>
                                                            <p>"If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text."</p>
                                                            <a href="#" class="btn float-btn flat-btn" target="_blank">Via Myspace</a>
                                                        </div>
                                                    </div>
                                                    <!-- swiper-slide end-->
                                                </div>
                                                <div class="swiper-pagination"></div>
                                                <div class="swiper-button-prev"><i class="fa fa-angle-left"></i></div>
                                                <div class="swiper-button-next"><i class="fa fa-angle-right"></i></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <!--section end  -->	
                        <!--section -->	
                        <section>
                            <div class="container">
                                <div class="clients-list fl-wrap">
                                    <ul>
                                        <li><a href="#" target="_blank"> <img src="{% static 'index/images/clients/1.jpg' %}" alt=""> </a></li>
                                        <li><a href="#" target="_blank"> <img src="{% static 'index/images/clients/2.jpg' %}" alt=""> </a></li>
                                        <li><a href="#" target="_blank"> <img src="{% static 'index/images/clients/3.jpg' %}" alt=""> </a></li>
                                        <li><a href="#" target="_blank"> <img src="{% static 'index/images/clients/4.jpg' %}" alt=""> </a></li>
                                        <li><a href="#" target="_blank"> <img src="{% static 'index/images/clients/5.jpg' %}" alt=""> </a></li>
                                    </ul>
                                    
                                </div>
                            </div>
                        </section>
                        <!--section end  -->	
                        <!--social-wrap -->	  
                        <div class="social-wrap fl-wrap">
                            <ul>
                                <li><a href="#" target="_blank" ><i class="fa fa-facebook"></i></a></li>
                                <li><a href="#" target="_blank"><i class="fa fa-twitter"></i></a></li>
                                <li><a href="#" target="_blank" ><i class="fa fa-instagram"></i></a></li>
                                <li><a href="#" target="_blank" ><i class="fa fa-pinterest"></i></a></li>
                                <li><a href="#" target="_blank" ><i class="fa fa-tumblr"></i></a></li>
                            </ul>
                        </div>
                        <!--social-wrap end-->	
                    </div>
                    <!-- content  end --> 
                    <!--=============== content-footer   ===============-->
                    <div class="height-emulator"></div>
                    <footer class="content-footer">
                        <div class="footer-inner">
                            <div class="row">
                                <div class="col-md-3">
                                    <a class="footer-logo" href="{% url 'index' %}"><img src="{% static 'index/images/logo.png' %}" alt=""></a>
                                </div>
                                
                                <div class="col-md-4">
                                    <div class="footer-header fl-wrap"><span>01.</span> Contacts</div>
                                    <div class="footer-box fl-wrap">
                                        <ul>
                                            <li><span>Mail :</span><a href="#" target="_blank">yourmail@domain.com</a></li>
                                            <li> <span>Adress :</span><a href="#" target="_blank">USA 27TH Brooklyn NY</a></li>
                                            <li><span>Phone :</span><a href="#">+7(111)123456789</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-md-5">
                                    <div class="footer-header fl-wrap"><span>02.</span> Subscribe</div>
                                    <div class="footer-box fl-wrap">
                                        <div class="subcribe-form fl-wrap">
                                            <span>Newsletter</span>
                                            <form id="subscribe">
                                                <input class="enteremail" name="email" id="subscribe-email" placeholder="email" spellcheck="false" type="text">
                                                <button type="submit" id="subscribe-button" class="subscribe-button">Submit</button>
                                                <label for="subscribe-email" class="subscribe-message"></label>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-3"></div>
                                <div class="col-md-9">
                                    <div class="fl-wrap policy-box">
                                        <p> &#169; ElegantDecor   2017.  All rights reserved.  </p>
                                    </div>
                                </div>
                            </div>
                            <div class="to-top"><i class="fa fa-long-arrow-up"></i></div>
                        </div>
                    </footer>
                    <!-- content-footer end    -->
                </div>
                <!-- content-holder end -->
            </div>
            <!-- wrapper end -->
            <!--search-form-holder -->  
            <div class="search-form-holder fixed-search">
                <div class="search-form-bg"></div>
                <div class="search-form-wrap">
                    <div class="container">
                        <form class="searchform" method="get"  >
                            <input type="text" autocomplete="off"   name="s" placeholder="Type and Enter to Search">
                        </form>
                        <div class="close-fixed-search"></div>
                    </div>
                    <div class="dublicated-text"></div>
                </div>
            </div>
            <!--search-form-holder  end-->  
<!-- Share container  -->
<div class="share-wrapper isShare">
    <div class="share-container" style="padding: 20px;">
        <ul style="list-style-type: none; padding: 0; margin: 0;">
            {% if user_type == 'Customer' %}
            <li style="margin-bottom: 15px; border-bottom: 1px solid #fff;">
                <a href="{% url 'profile' %}" style="color: #fff; text-decoration: none; font-size: 16px; transition: all 0.3s ease; display: block; padding: 10px; border-radius: 5px;" onmouseover="this.style.backgroundColor='#fff'; this.style.color='#000';" onmouseout="this.style.backgroundColor='black'; this.style.color='#fff';">My Profile</a>
            </li>
            <li style="margin-bottom: 15px; border-bottom: 1px solid #fff;">
                <a href="{% url 'my_projects' %}" style="color: #fff; text-decoration: none; font-size: 16px; transition: all 0.3s ease; display: block; padding: 10px; border-radius: 5px;" onmouseover="this.style.backgroundColor='#fff'; this.style.color='#000';" onmouseout="this.style.backgroundColor='black'; this.style.color='#fff';">Projects</a>
            </li>
            <li style="margin-bottom: 15px; border-bottom: 1px solid #fff;">
                <a href="{% url 'my_consultations' %}" style="color: #fff; text-decoration: none; font-size: 16px; transition: all 0.3s ease; display: block; padding: 10px; border-radius: 5px;" onmouseover="this.style.backgroundColor='#fff'; this.style.color='#000';" onmouseout="this.style.backgroundColor='black'; this.style.color='#fff';">Consultations</a>
            </li>
            <li style="margin-bottom: 15px; border-bottom: 1px solid #fff;">
                <a href="{% url 'my_orders' %}" style="color: #fff; text-decoration: none; font-size: 16px; transition: all 0.3s ease; display: block; padding: 10px; border-radius: 5px;" onmouseover="this.style.backgroundColor='#fff'; this.style.color='#000';" onmouseout="this.style.backgroundColor='black'; this.style.color='#fff';">Orders</a>
            </li>
            
        <li style="margin-bottom: 15px; border-bottom: 1px solid #fff;">
            <a href="{% url 'logout_view' %}" style="color: #fff; text-decoration: none; font-size: 16px; transition: all 0.3s ease; display: block; padding: 10px; border-radius: 5px;" onmouseover="this.style.backgroundColor='#fff'; this.style.color='#000';" onmouseout="this.style.backgroundColor='black'; this.style.color='#fff';">Logout</a>
        </li>
        </ul>
        {% endif %}
        {% if user_type == 'Designer' %}
                <li style="margin-bottom: 15px; border-bottom: 1px solid #fff;">
                    <a href="{% url 'profile' %}" style="color: #fff; text-decoration: none; font-size: 16px; transition: all 0.3s ease; display: block; padding: 10px; border-radius: 5px;" onmouseover="this.style.backgroundColor='#fff'; this.style.color='#000';" onmouseout="this.style.backgroundColor='black'; this.style.color='#fff';">My Profile</a>
                </li>
                    <li style="margin-bottom: 15px; border-bottom: 1px solid #fff;">
                        <a href="{% url 'add_portfolio' %}" style="color: #fff; text-decoration: none; font-size: 16px; transition: all 0.3s ease; display: block; padding: 10px; border-radius: 5px;" onmouseover="this.style.backgroundColor='#fff'; this.style.color='#000';" onmouseout="this.style.backgroundColor='black'; this.style.color='#fff';">Add Designs</a>
                    </li>
                    <li style="margin-bottom: 15px; border-bottom: 1px solid #fff;">
                        <a href="{% url 'schedule_consultation' %}" style="color: #fff; text-decoration: none; font-size: 16px; transition: all 0.3s ease; display: block; padding: 10px; border-radius: 5px;" onmouseover="this.style.backgroundColor='#fff'; this.style.color='#000';" onmouseout="this.style.backgroundColor='black'; this.style.color='#fff';">Schedule Consultations</a>
                    </li>
                <li style="margin-bottom: 15px; border-bottom: 1px solid #fff;">
                    <a href="{% url 'logout_view' %}" style="color: #fff; text-decoration: none; font-size: 16px; transition: all 0.3s ease; display: block; padding: 10px; border-radius: 5px;" onmouseover="this.style.backgroundColor='#fff'; this.style.color='#000';" onmouseout="this.style.backgroundColor='black'; this.style.color='#fff';">Logout</a>
                </li>
                </ul>
        {% endif %}
    </div>
</div>
<!-- Share container  end-->
            <!-- footer -->
            <footer class="main-footer">
                <div class="fixed-title"><span>Home Slider</span></div>
                <div class="footer-social">
                    <ul>
                        <li><a href="#" target="_blank" ><i class="fa fa-facebook"></i></a></li>
                        <li><a href="#" target="_blank"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="#" target="_blank" ><i class="fa fa-instagram"></i></a></li>
                        <li><a href="#" target="_blank" ><i class="fa fa-pinterest"></i></a></li>
                        <li><a href="#" target="_blank" ><i class="fa fa-tumblr"></i></a></li>
                    </ul>
                </div>
            </footer>
            <!-- footer end-->
        </div>
        <!-- Main end -->
        <!--=============== scripts  ===============-->
        <script type="text/javascript" src="{% static 'index/js/jquery.min.js' %}"></script>
            <script type="text/javascript" src="{% static 'index/js/plugins.js' %}"></script>
            <script type="text/javascript" src="{% static 'index/js/scripts.js' %}"></script>

<!-- Chatbot Integration -->
<div id="chatbot" style="position: fixed; bottom: 20px; right: 20px; width: 300px; max-width: 90vw; border: 1px solid #000; border-radius: 10px; background-color: white; display: none; box-shadow: 0 2px 10px rgba(0,0,0,0.2); z-index: 9999;">
    <!-- Header -->
    <div style="padding: 12px; background-color: #000000; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <div style="font-size: 14px; display: flex; align-items: center; gap: 8px;">
            <i class="fa fa-robot" style="font-size: 16px;"></i>
            <span style="color: #ffffff;">ElegantDecor</span>
            <span style="color: #ffffff; font-size: 12px;">AI</span>
        </div>
        <div style="display: flex; align-items: center; gap: 10px;">
            {% if user.is_authenticated %}
                <span style="font-size: 12px; color: #ffffff;">Hi, {{ user.username }}</span>
            {% endif %}
            <button onclick="toggleChatbot()" style="background: none; border: none; color: white; font-size: 18px; cursor: pointer;">Ã—</button>
        </div>
    </div>

    <!-- Chat Messages -->
    <div id="chatbot-messages" style="height: 300px; overflow-y: auto; padding: 10px; font-family: Arial, sans-serif; font-size: 14px;">
        <!-- Messages will appear here -->
    </div>

    <!-- Input Area -->
    <div style="padding: 10px; display: flex; gap: 5px;">
        <input type="text" id="chatbot-input" placeholder="Type your message..." 
               style="flex: 1; padding: 8px; border-radius: 20px; border: 1px solid #ccc; font-size: 14px;" />
        <button onclick="sendMessage()" 
                style="background-color: #000000; color: white; border: none; border-radius: 20px; padding: 8px 15px; cursor: pointer;">
            Send
        </button>
    </div>
</div>

<!-- Chat Toggle Button -->
<button id="chat-toggle-btn" onclick="toggleChatbot()" 
        style="position: fixed; bottom: 20px; right: 20px; 
               background-color: #000000; 
               color: #ffffff; 
               border: none; 
               border-radius: 50%; 
               width: 60px; 
               height: 60px; 
               cursor: pointer; 
               z-index: 9999;
               box-shadow: 0 4px 8px rgba(0,0,0,0.2);
               display: flex;
               flex-direction: column;
               align-items: center;
               justify-content: center;
               padding: 8px;">
    <i class="fa fa-robot" style="font-size: 24px; margin-bottom: 2px;"></i>
    <span style="font-size: 10px; font-weight: bold;">AI Chat</span>
</button>

<!-- Add this script right before the closing </body> tag -->
<script>
// Make sure these variables are defined
const API_KEY = 'AIzaSyCcldFUfZNm4jRcDeWhj64mUfvqx7l3t18';
const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent';

// First, let's add the welcome message function
function showWelcomeMessage() {
    const messagesDiv = document.getElementById('chatbot-messages');
    const timestamp = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    const isAuthenticated = {{ user.is_authenticated|yesno:"true,false" }};
    
    if (isAuthenticated) {
        // Message for logged-in users
        const userType = '{{ user.user_type_id.user_type }}';
        const userName = '{{ user.name }}';
        
        messagesDiv.innerHTML = `
            <div style="display: flex; justify-content: flex-start; margin: 8px 0;">
                <div style="max-width: 100%;">
                    <div style="background-color: #f5f5f5; padding: 15px; border-radius: 12px 12px 12px 0;">
                        <div style="margin-bottom: 10px;">
                            <div style="font-size: 16px; font-weight: bold; color: #000000; margin-bottom: 5px;">
                                Welcome back, ${userName}! ðŸ‘‹
                            </div>
                            <div style="font-size: 14px; color: #666;">
                                How can I assist you today? You can ask me about:
                                ${userType === 'Designer' ? `
                                    <ul style="margin: 10px 0; padding-left: 20px;">
                                        <li>Your design portfolio</li>
                                        <li>Active projects</li>
                                        <li>Consultation schedules</li>
                                        <li>Adding new designs</li>
                                    </ul>
                                ` : `
                                    <ul style="margin: 10px 0; padding-left: 20px;">
                                        <li>Your orders</li>
                                        <li>Active projects</li>
                                        <li>Consultation bookings</li>
                                        <li>Available designs</li>
                                    </ul>
                                `}
                            </div>
                        </div>
                    </div>
                    <div style="font-size: 10px; color: #666;">
                        ${timestamp}
                    </div>
                </div>
            </div>`;
    } else {
        // Message for non-logged-in users
        messagesDiv.innerHTML = `
            <div style="display: flex; justify-content: flex-start; margin: 8px 0;">
                <div style="max-width: 100%;">
                    <div style="background-color: #f5f5f5; padding: 15px; border-radius: 12px 12px 12px 0;">
                        <div style="margin-bottom: 10px;">
                            <div style="font-size: 16px; font-weight: bold; color: #000000; margin-bottom: 5px;">
                                Welcome to ElegantDecor! ðŸ‘‹
                            </div>
                            <div style="font-size: 14px; color: #666;">
                                I'm here to provide information about our services and interior design guidance. 
                                For personalized assistance, please <a href="/signin/" style="color: #000; text-decoration: underline;">sign in</a>.
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li>Browse our design portfolio</li>
                                    <li>Learn about our services</li>
                                    <li>Get general design tips</li>
                                    <li>Find consultation information</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div style="font-size: 10px; color: #666;">
                        ${timestamp}
                    </div>
                </div>
            </div>`;
    }
}

// Update the profile card formatting
function formatProfileCard(userInfo) {
    return `
        <div style="font-family: Arial, sans-serif; width: 100%; background: white; border: 1px solid #ddd; border-radius: 8px;">
            <!-- Header -->
            <div style="background: #000; color: white; padding: 15px; border-radius: 8px 8px 0 0;">
                <h2 style="margin: 0; font-size: 16px;">Hi, ${userInfo.name}</h2>
                <p style="margin: 5px 0 0; font-size: 14px; opacity: 0.8;">${userInfo.user_type}</p>
            </div>

            <!-- Contact Info -->
            <div style="padding: 15px; border-bottom: 1px solid #eee;">
                <h3 style="margin: 0 0 10px 0; font-size: 14px; color: #666;">Contact Information</h3>
                <p style="margin: 5px 0; font-size: 14px;">
                    <strong>Email:</strong> ${userInfo.email}
                </p>
                <p style="margin: 5px 0; font-size: 14px;">
                    <strong>Phone:</strong> ${userInfo.phone}
                </p>
            </div>

            <!-- Address -->
            <div style="padding: 15px; border-bottom: 1px solid #eee;">
                <h3 style="margin: 0 0 10px 0; font-size: 14px; color: #666;">Address</h3>
                <p style="margin: 5px 0; font-size: 14px;">${userInfo.address || 'No address provided'}</p>
                <p style="margin: 5px 0; font-size: 14px;">
                    <strong>Home Town:</strong> ${userInfo.home_town}
                </p>
                <p style="margin: 5px 0; font-size: 14px;">
                    <strong>District:</strong> ${userInfo.district}
                </p>
                <p style="margin: 5px 0; font-size: 14px;">
                    <strong>State:</strong> ${userInfo.state}
                </p>
                <p style="margin: 5px 0; font-size: 14px;">
                    <strong>Pincode:</strong> ${userInfo.pincode}
                </p>
            </div>

            <!-- Statistics -->
            <div style="padding: 15px;">
                <h3 style="margin: 0 0 15px 0; font-size: 14px; color: #666; text-align: center;">Statistics</h3>
                <div style="display: flex; justify-content: space-around; align-items: center; gap: 5px;">
                    ${userInfo.user_type === 'Designer' ? `
                        <div style="flex: 1; text-align: center; background: #f8f8f8; padding: 12px 5px; border-radius: 4px;">
                            <div style="font-size: 20px; font-weight: bold; margin-bottom: 4px;">${userInfo.total_designs || 0}</div>
                            <div style="font-size: 12px; color: #666;">Designs</div>
                        </div>
                        <div style="flex: 1; text-align: center; background: #f8f8f8; padding: 12px 5px; border-radius: 4px;">
                            <div style="font-size: 20px; font-weight: bold; margin-bottom: 4px;">${userInfo.total_projects || 0}</div>
                            <div style="font-size: 12px; color: #666;">Projects</div>
                        </div>
                        <div style="flex: 1; text-align: center; background: #f8f8f8; padding: 12px 5px; border-radius: 4px;">
                            <div style="font-size: 20px; font-weight: bold; margin-bottom: 4px;">${userInfo.total_consultations || 0}</div>
                            <div style="font-size: 12px; color: #666;">Consultations</div>
                        </div>
                    ` : `
                        <div style="flex: 1; text-align: center; background: #f8f8f8; padding: 12px 5px; border-radius: 4px;">
                            <div style="font-size: 20px; font-weight: bold; margin-bottom: 4px;">${userInfo.total_orders || 0}</div>
                            <div style="font-size: 12px; color: #666;">Orders</div>
                        </div>
                        <div style="flex: 1; text-align: center; background: #f8f8f8; padding: 12px 5px; border-radius: 4px;">
                            <div style="font-size: 20px; font-weight: bold; margin-bottom: 4px;">${userInfo.total_projects || 0}</div>
                            <div style="font-size: 12px; color: #666;">Projects</div>
                        </div>
                        <div style="flex: 1; text-align: center; background: #f8f8f8; padding: 12px 5px; border-radius: 4px;">
                            <div style="font-size: 20px; font-weight: bold; margin-bottom: 4px;">${userInfo.total_consultations || 0}</div>
                            <div style="font-size: 12px; color: #666;">Consultations</div>
                        </div>
                    `}
                </div>
            </div>
        </div>
    `;
}

// Update the toggleChatbot function to show welcome message
function toggleChatbot() {
    const chatbot = document.getElementById('chatbot');
    const toggleBtn = document.getElementById('chat-toggle-btn');
    
    if (chatbot.style.display === 'none') {
        chatbot.style.display = 'block';
        toggleBtn.style.display = 'none';
        // Show welcome message when chat is opened
        showWelcomeMessage();
    } else {
        chatbot.style.display = 'none';
        toggleBtn.style.display = 'flex';
    }
}

async function getUserInfo() {
    try {
        const response = await fetch('/api/user-info/');
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Error fetching user info:', error);
        return null;
    }
}

async function sendMessage() {
    const messageInput = document.getElementById('chatbot-input');
    const message = messageInput.value.trim();
    const messagesDiv = document.getElementById('chatbot-messages');
    const timestamp = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    const isAuthenticated = {{ user.is_authenticated|yesno:"true,false" }};

    if (!message) return;

    // Clear input
    messageInput.value = '';

    // Add user message
    messagesDiv.innerHTML += `
        <div style="display: flex; justify-content: flex-end; margin: 8px 0;">
            <div style="max-width: 80%;">
                <div style="background-color: #000000; color: white; padding: 8px 12px; border-radius: 12px 12px 0 12px;">
                    ${message}
                </div>
                <div style="font-size: 10px; color: #666; text-align: right;">
                    ${timestamp}
                </div>
            </div>
        </div>`;

    // Add typing indicator
    messagesDiv.innerHTML += `
        <div id="typing-indicator" style="display: flex; justify-content: flex-start; margin: 8px 0;">
            <div style="background-color: #f5f5f5; padding: 8px 12px; border-radius: 12px; max-width: 80%;">
                <div class="typing-dots">
                    <span>.</span><span>.</span><span>.</span>
                </div>
            </div>
        </div>`;

    try {
        let userInfo;
        let promptText;
        
        if (isAuthenticated) {
            // Fetch user info for authenticated users
            userInfo = await getUserInfo();
            
            // Use the existing detailed prompt for authenticated users
            promptText = `
                You are an AI assistant for ElegantDecor. The user ${userInfo.name} is logged in as a ${userInfo.user_type}.
                
                User Information:
                ${JSON.stringify(userInfo)}
                
                Provide personalized responses based on their user type and data.
                For designers, include information about their portfolio, consultations, and projects.
                For customers, include information about their orders, consultations, and projects.
                
                User query: ${message}
            `;
        } else {
            // Use simplified prompt for non-authenticated users
            promptText = `
                You are an AI assistant for ElegantDecor, a creative interior design and architecture studio. 
                You help users with information about our services and general interior design advice.
                
                Key information about ElegantDecor:
                - We offer interior design and architecture services
                - We have an online shop for furniture and decor items
                - We provide design consultations with professional designers
                - We create custom mood boards for design inspiration
                
                For general interior design questions, provide helpful advice.
                For personal information requests (orders, projects, etc), kindly direct users to sign in.
                
                Available pages:
                - Shop: /shop/
                - Portfolio: /portfolio/
                - Sign In: /signin/
                - Contact: /contact/
                
                User query: ${message}
            `;
        }

        const response = await fetch(`${API_URL}?key=${API_KEY}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                contents: [{
                    parts: [{
                        text: promptText
                    }]
                }]
            })
        });

        // Remove typing indicator
        const typingIndicator = document.getElementById('typing-indicator');
        if (typingIndicator) {
            typingIndicator.remove();
        }

        const data = await response.json();
        let botResponse = data.candidates[0].content.parts[0].text;

        if (isAuthenticated) {
            let formattedResponse = botResponse;
            const lowerMessage = message.toLowerCase();

            if (lowerMessage.includes('profile') || lowerMessage.includes('my info')) {
                formattedResponse = formatProfileCard(userInfo);
            }
            else if (lowerMessage.includes('projects')) {
                formattedResponse = `
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0; background: white; border-radius: 8px; border: 1px solid #e0e0e0;">
                        <thead>
                            <tr style="background-color: #000000; color: white;">
                                <th style="padding: 12px; text-align: left;">Design</th>
                                ${userInfo.user_type === 'Designer' ? 
                                    '<th style="padding: 12px; text-align: left;">Customer</th>' : 
                                    '<th style="padding: 12px; text-align: left;">Designer</th>'}
                                <th style="padding: 12px; text-align: left;">Room Size</th>
                                <th style="padding: 12px; text-align: left;">Status</th>
                                <th style="padding: 12px; text-align: left;">Start Date</th>
                                <th style="padding: 12px; text-align: left;">Completion Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${userInfo.projects ? userInfo.projects.map(project => `
                                <tr style="border-bottom: 1px solid #eee;">
                                    <td style="padding: 12px;">${project.design ? project.design.name : 'N/A'}</td>
                                    <td style="padding: 12px;">
                                        ${userInfo.user_type === 'Designer' ? 
                                            (project.customer ? project.customer.name : 'N/A') : 
                                            (project.designer ? project.designer.name : 'N/A')}
                                    </td>
                                    <td style="padding: 12px;">
                                        ${project.room_length}L x ${project.room_width}W x ${project.room_height}H
                                    </td>
                                    <td style="padding: 12px;">
                                        <span style="padding: 4px 8px; border-radius: 12px; font-size: 12px; background-color: ${
                                            project.status === 'Completed' ? '#e8f5e9' : 
                                            project.status === 'In Progress' ? '#fff3e0' : 
                                            project.status === 'Not Started' ? '#ffebee' : '#f5f5f5'
                                        }; color: ${
                                            project.status === 'Completed' ? '#2e7d32' : 
                                            project.status === 'In Progress' ? '#ef6c00' : 
                                            project.status === 'Not Started' ? '#c62828' : '#616161'
                                        };">
                                            ${project.status}
                                        </span>
                                    </td>
                                    <td style="padding: 12px;">${project.start_date || 'Not Started'}</td>
                                    <td style="padding: 12px;">${project.completed_date || 'In Progress'}</td>
                                </tr>
                            `).join('') : '<tr><td colspan="6" style="padding: 12px; text-align: center;">No projects found.</td></tr>'}
                        </tbody>
                    </table>
                    <div style="margin-top: 15px; display: flex; gap: 15px; justify-content: flex-end;">
                        <div style="background: #f5f5f5; padding: 8px 15px; border-radius: 8px;">
                            Total Projects: ${userInfo.total_projects || 0}
                        </div>
                        <div style="background: #fff3e0; padding: 8px 15px; border-radius: 8px;">
                            Active Projects: ${userInfo.active_projects || 0}
                        </div>
                    </div>
                </div>`;
            }
            else if (lowerMessage.includes('orders')) {
                // Only show orders for Customers
                if (userInfo.user_type === 'Customer') {
                    formattedResponse = `
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; margin: 10px 0; background: white; border-radius: 8px; border: 1px solid #e0e0e0;">
                            <thead>
                                <tr style="background-color: #000000; color: white;">
                                    <th style="padding: 12px; text-align: left;">Order ID</th>
                                    <th style="padding: 12px; text-align: left;">Product</th>
                                    <th style="padding: 12px; text-align: left;">Quantity</th>
                                    <th style="padding: 12px; text-align: left;">Amount</th>
                                    <th style="padding: 12px; text-align: left;">Order Date</th>
                                    <th style="padding: 12px; text-align: left;">Status</th>
                                    <th style="padding: 12px; text-align: left;">Payment Type</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${userInfo.orders ? userInfo.orders.map(order => `
                                    <tr style="border-bottom: 1px solid #eee;">
                                        <td style="padding: 12px;">#${order.order_id}</td>
                                        <td style="padding: 12px;">
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                ${order.product_image ? 
                                                    `<img src="${order.product_image}" alt="${order.product}" 
                                                          style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;">` : 
                                                    `<div style="width: 50px; height: 50px; background: #f5f5f5; border-radius: 4px; 
                                                          display: flex; align-items: center; justify-content: center;">
                                                        <span style="color: #999;">No image</span>
                                                     </div>`
                                                }
                                                <span>${order.product}</span>
                                            </div>
                                        </td>
                                        <td style="padding: 12px;">${order.quantity}</td>
                                        <td style="padding: 12px;">Rs ${order.amount}</td>
                                        <td style="padding: 12px;">${order.order_date}</td>
                                        <td style="padding: 12px;">
                                            <span style="padding: 4px 8px; border-radius: 12px; font-size: 12px; background-color: ${
                                                order.order_status === 'Completed' ? '#e8f5e9' : 
                                                order.order_status === 'Pending' ? '#fff3e0' : 
                                                order.order_status === 'Cancelled' ? '#ffebee' : '#f5f5f5'
                                            }; color: ${
                                                order.order_status === 'Completed' ? '#2e7d32' : 
                                                order.order_status === 'Pending' ? '#ef6c00' : 
                                                order.order_status === 'Cancelled' ? '#c62828' : '#616161'
                                            };">
                                                ${order.order_status}
                                            </span>
                                        </td>
                                        <td style="padding: 12px;">${order.payment_type}</td>
                                    </tr>
                                `).join('') : '<tr><td colspan="7" style="padding: 12px; text-align: center;">No orders found.</td></tr>'}
                            </tbody>
                        </table>
                        ${userInfo.orders && userInfo.orders.length > 0 ? `
                            <div style="margin-top: 15px; display: flex; gap: 15px; justify-content: flex-end;">
                                <div style="background: #f5f5f5; padding: 8px 15px; border-radius: 8px;">
                                    Total Orders: ${userInfo.total_orders || 0}
                                </div>
                                <div style="background: #fff3e0; padding: 8px 15px; border-radius: 8px;">
                                    Pending Orders: ${userInfo.pending_orders || 0}
                                </div>
                            </div>
                        ` : ''}
                    </div>`;
                } else {
                    formattedResponse = "As a Designer, you don't have access to orders. You can view your projects, consultations, and designs instead.";
                }
            }
            else if (lowerMessage.includes('consultations')) {
                formattedResponse = `
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0; background: white; border-radius: 8px; border: 1px solid #e0e0e0;">
                        <thead>
                            <tr style="background-color: #000000; color: white;">
                                <th style="padding: 12px; text-align: left;">Design</th>
                                <th style="padding: 12px; text-align: left;">Contact</th>
                                <th style="padding: 12px; text-align: left;">Status</th>
                                <th style="padding: 12px; text-align: left;">Schedule</th>
                                <th style="padding: 12px; text-align: left;">Room Size</th>
                                <th style="padding: 12px; text-align: left;">Payment</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${userInfo.consultations ? userInfo.consultations.map(consultation => `
                                <tr style="border-bottom: 1px solid #eee;">
                                    <td style="padding: 12px;">${consultation.design_name}</td>
                                    <td style="padding: 12px;">
                                        <div>ðŸ“§ ${consultation.designer_email}</div>
                                        <div>ðŸ“± ${consultation.designer_phone}</div>
                                    </td>
                                    <td style="padding: 12px;">
                                        <span style="padding: 4px 8px; border-radius: 12px; font-size: 12px; background-color: ${
                                            consultation.status === 'Completed' ? '#e8f5e9' : 
                                            consultation.status === 'Scheduled' ? '#fff3e0' : 
                                            consultation.status === 'Pending' ? '#ffebee' : '#f5f5f5'
                                        }; color: ${
                                            consultation.status === 'Completed' ? '#2e7d32' : 
                                            consultation.status === 'Scheduled' ? '#ef6c00' : 
                                            consultation.status === 'Pending' ? '#c62828' : '#616161'
                                        };">
                                            ${consultation.status}
                                        </span>
                                    </td>
                                    <td style="padding: 12px;">${consultation.schedule_date}</td>
                                    <td style="padding: 12px;">${consultation.room_dimensions}</td>
                                    <td style="padding: 12px;">
                                        <div>Amount: Rs ${consultation.amount}</div>
                                        <div style="margin-top: 4px;">
                                            <span style="padding: 4px 8px; border-radius: 12px; font-size: 12px; background-color: ${
                                                consultation.payment_status === 'paid' ? '#e8f5e9' : '#ffebee'
                                            }; color: ${
                                                consultation.payment_status === 'paid' ? '#2e7d32' : '#c62828'
                                            };">
                                                ${consultation.payment_status}
                                            </span>
                                        </div>
                                    </td>
                                </tr>
                            `).join('') : '<tr><td colspan="6" style="padding: 12px; text-align: center;">No consultations found.</td></tr>'}
                        </tbody>
                    </table>
                    <div style="margin-top: 15px; display: flex; gap: 15px; justify-content: flex-end;">
                        <div style="background: #f5f5f5; padding: 8px 15px; border-radius: 8px;">
                            Total Consultations: ${userInfo.total_consultations || 0}
                        </div>
                        <div style="background: #fff3e0; padding: 8px 15px; border-radius: 8px;">
                            Pending Consultations: ${userInfo.pending_consultations || 0}
                        </div>
                    </div>
                </div>`;
            }
            else if (lowerMessage.includes('designs')) {
                // Only show designs for Designers
                if (userInfo.user_type === 'Designer') {
                    formattedResponse = `
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; margin: 10px 0; background: white; border-radius: 8px; border: 1px solid #e0e0e0;">
                            <thead>
                                <tr style="background-color: #000000; color: white;">
                                    <th style="padding: 12px; text-align: left;">Design</th>
                                    <th style="padding: 12px; text-align: left;">Category</th>
                                    <th style="padding: 12px; text-align: left;">Description</th>
                                    <th style="padding: 12px; text-align: left;">Square Feet</th>
                                    <th style="padding: 12px; text-align: left;">Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${userInfo.designs && userInfo.designs.length > 0 ? userInfo.designs.map(design => `
                                    <tr style="border-bottom: 1px solid #eee;">
                                        <td style="padding: 12px;">
                                            <div style="display: flex; align-items: center; gap: 10px;">
                                                ${design.image_url ? 
                                                    `<img src="${design.image_url}" alt="${design.name}" style="width: 40px; height: 40px; object-fit: cover; border-radius: 4px;">` : 
                                                    '<div style="width: 40px; height: 40px; background: #f5f5f5; border-radius: 4px;"></div>'}
                                                <span>${design.name || 'Untitled'}</span>
                                            </div>
                                        </td>
                                        <td style="padding: 12px;">${design.category || 'N/A'}</td>
                                        <td style="padding: 12px; max-width: 150px;">
                                            <div style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" 
                                                 title="${design.description || 'No description'}">
                                                ${design.description || 'No description'}
                                            </div>
                                        </td>
                                        <td style="padding: 12px;">${design.sqft || 'N/A'} sq ft</td>
                                        <td style="padding: 12px;">Rs ${parseFloat(design.amount || 0).toFixed(2)}</td>
                                    </tr>
                                `).join('') : '<tr><td colspan="5" style="padding: 12px; text-align: center;">No designs found.</td></tr>'}
                            </tbody>
                        </table>
                        <div style="margin-top: 15px; display: flex; gap: 15px; justify-content: flex-end;">
                            <div style="background: #f5f5f5; padding: 8px 15px; border-radius: 8px;">
                                Total Designs: ${userInfo.total_designs || 0}
                            </div>
                        </div>
                    </div>`;
                } else {
                    formattedResponse = "As a Customer, you can browse all designs in our portfolio section. You can also check your projects and consultations to see designs you're working with.";
                }
            }
            else if (lowerMessage.includes('products')) {
                formattedResponse = `
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0; background: white; border-radius: 8px; border: 1px solid #e0e0e0;">
                        <thead>
                            <tr style="background-color: #000000; color: white;">
                                <th style="padding: 12px; text-align: left;">Product</th>
                                <th style="padding: 12px; text-align: left;">Category</th>
                                <th style="padding: 12px; text-align: left;">Price</th>
                                <th style="padding: 12px; text-align: left;">Stock</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${userInfo.products ? userInfo.products.map(product => `
                                <tr style="border-bottom: 1px solid #eee;">
                                    <td style="padding: 12px;">
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <img src="${product.image}" alt="${product.name}" style="width: 40px; height: 40px; object-fit: cover; border-radius: 4px;">
                                            <span>${product.name}</span>
                                        </div>
                                    </td>
                                    <td style="padding: 12px;">${product.category}</td>
                                    <td style="padding: 12px;">$${product.price}</td>
                                    <td style="padding: 12px;">
                                        <span style="padding: 4px 8px; border-radius: 12px; font-size: 12px; background-color: ${
                                            product.stock > 10 ? '#e8f5e9' : 
                                            product.stock > 0 ? '#fff3e0' : '#ffebee'
                                        }; color: ${
                                            product.stock > 10 ? '#2e7d32' : 
                                            product.stock > 0 ? '#ef6c00' : '#c62828'
                                        };">
                                            ${product.stock > 0 ? `${product.stock} in stock` : 'Out of stock'}
                                        </span>
                                    </td>
                                </tr>
                            `).join('') : '<tr><td colspan="4" style="padding: 12px; text-align: center;">No products found.</td></tr>'}
                        </tbody>
                    </table>
                </div>`;
            }

            botResponse = formattedResponse;
        }

        // Display the response
        messagesDiv.innerHTML += `
            <div style="display: flex; justify-content: flex-start; margin: 8px 0;">
                <div style="max-width: 100%; width: 100%;">
                    <div style="background-color: #f5f5f5; padding: 8px 12px; border-radius: 12px 12px 12px 0;">
                        ${botResponse}
                    </div>
                    <div style="font-size: 10px; color: #666;">
                        ${timestamp}
                    </div>
                </div>
            </div>`;

    } catch (error) {
        console.error('Error:', error);
        messagesDiv.innerHTML += `
            <div style="display: flex; justify-content: flex-start; margin: 8px 0;">
                <div style="max-width: 80%;">
                    <div style="background-color: #fff0f0; color: #d32f2f; padding: 8px 12px; border-radius: 12px 12px 12px 0;">
                        I apologize, but I'm having trouble processing your request right now. Please try again.
                    </div>
                    <div style="font-size: 10px; color: #666;">
                        ${timestamp}
                    </div>
                </div>
            </div>`;
    }

    // Scroll to bottom
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
}

// Add Enter key handler
document.getElementById('chatbot-input').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        sendMessage();
    }
});

// Add some CSS for the typing animation
const style = document.createElement('style');
style.textContent = `
    .typing-dots span {
        animation: typing 1.4s infinite;
        opacity: 0.3;
    }
    .typing-dots span:nth-child(2) {
        animation-delay: 0.2s;
    }
    .typing-dots span:nth-child(3) {
        animation-delay: 0.4s;
    }
    @keyframes typing {
        0%, 100% {
            opacity: 0.3;
        }
        50% {
            opacity: 1;
        }
    }
`;
document.head.appendChild(style);
</script>
 </body>
</html>
